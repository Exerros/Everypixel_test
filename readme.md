# Тестовое задание для компании [Everypixel](https://www.everypixel.com/)
### Задача состояла в разработке парсера файлов. Его задачи:
- [x] Парсить каталог файлов/папок произвольной вложенности
- [x] В каждом из файлов менять все вхождения шаблона на текст замены.
- [x] Работать в несколько потоков
- [x] Сообщать пользователю, что работа выполнена

### Также у программы должен быть конфиг файл со следующими данными:
- [x] Количество потоков на парсинг файлов
- [x] Адрес корневой директории с файлами и папками
- [x] Перечисление шаблонов и их замен (неограниченное количество)

### Дополнительные требования:  
- [x] С++11 или выше
- [x] Программа должна работать только с использованием библиотеки STL
- [x] Выполненное задание должно располагаться на Github или Bitbucket. 
- [x] Написание unit-тестов будет являться дополнительным плюсом.

# Необходимо для сборки

Сборка программы производилась на операционной системе Debian 10.
Для сборки необходим CMake версии 2.8 или старше и компилятор с поддержкой C++17.
Также, в моей реализации библиотек STL **filesystem** и **thread** используются библиотеки **stdc++fs** и **pthread**, 
если ваша реализация отличается, то возможно вам придется изменить CMakeLists.txt.
  
# Как собрать проект

Переместитесь в директорию в которую хотите скопировать проект и скопируйте команды в терминал:
> git clone https://github.com/Exerros/Everypixel_test.git  
> mkdir build  
> cd build  
> cmake ..  
> cmake --build . 

Для запуска используйте команду:  
> ./everypixel_test  
или  
> ./everypixel_test <путь до config.txt>  
### Ознакомьтесь с тем как правильно заполнить файл конфигурации и обязательно создайте его перед запуском программы.

# Как запустить тесты

Аналогично обычной сборке, переместитесь в директорию куда хотите поместить проект и скопируйте команды в терминал:
> git clone https://github.com/Exerros/Everypixel_test.git  
> mkdir build  
> cd build  
> cmake .. -DBUILD_TEST=ON  
> cmake --build .  
> ./everypixel_test  

Как вы могли заметить для компиляции программы с включением тестов и их запуска используется ключ BUILD_TEST со значением ON. 
По умолчанию программа собирается в рабочем режиме и тесты не включаются в ее программный код.

# Как правильно заполнить config
Файл конфигурации содержит 3 поля:  
> root: "<корневая директория>";  
> streams: <число потоков>;  
> replace: <"шаблон замены" = "результат замены">(любое количество раз);  

Каждое поле должно заканчиваться символом ';' и не должно содержать его внутри себя.  
Каждое поле может содержать любое число пробелов между названием и значением, либо не содержать их совсем. Также можно разнести их на разные строки.  
В поле replase может содержаться любое число пар. Они могут быть либо записаны как в одну строку, либо разнесены на разные строки, либо и то и то сразу, **НО** <шаблон замены> и <результат замены> должны находиться на одной строке.  
Шаблоны замены могут содержать символы не зарезервированные синтаксисом ECMAScript, в частности символы:  
> . , ! @ % & - _ = < > (этот список может быть не полным)  

Дополнительную информацию вы можете посмотреть в файлах тестов. Они компилируются при указании вышеописанного ключа BUILD_TESTS и располагаются в директории **/tests**.
